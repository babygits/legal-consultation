import{r as c,o as g,a as u,c as y,b as r,d as n,w as s,e as l,f as w,g as p,t as k}from"./index-_Z1ISS97.js";const x={__name:"IncomeOverview",setup(b){const i=c(0),o=c(0),m=async()=>{if(o.value)try{const t=localStorage.getItem("token"),e=await fetch("/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({price:o.value})}),a=await e.json();if(!e.ok)throw new Error(a.message||"更新失败");u.success("已保存咨询金额")}catch(t){u.error(t.message)}};return g(async()=>{try{const t=localStorage.getItem("token"),e=await fetch("/api/users/me",{headers:{Authorization:"Bearer "+t}}),a=await e.json();if(!e.ok)throw new Error(a.message||"加载失败");o.value=a.price,i.value=a.balance}catch(t){u.error(t.message)}}),(t,e)=>{const a=l("a-card"),d=l("a-input"),f=l("a-button"),v=l("a-space");return w(),y("div",null,[e[3]||(e[3]=r("h2",null,"当前余额",-1)),n(a,null,{default:s(()=>[r("p",null,[e[1]||(e[1]=r("strong",null,"当前余额：",-1)),p("￥"+k(i.value),1)])]),_:1}),e[4]||(e[4]=r("h2",{style:{"margin-top":"20px"}},"设置咨询金额",-1)),n(a,null,{default:s(()=>[n(v,null,{default:s(()=>[n(d,{value:o.value,"onUpdate:value":e[0]||(e[0]=_=>o.value=_),placeholder:"咨询金额",type:"number",step:"1",min:"1"},null,8,["value"]),n(f,{type:"primary",onClick:m},{default:s(()=>e[2]||(e[2]=[p("保存")])),_:1})]),_:1})]),_:1})])}}};export{x as default};
